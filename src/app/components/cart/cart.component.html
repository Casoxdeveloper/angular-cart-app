<h1 class="text-center mb-3">Carro de compras!</h1>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Product</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Total</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of cartItems">
      <td>
        <img [src]="item.product.image" alt="{{ item.product.name }}" />
        <span>{{ item.product.name }}</span>
      </td>
      <td>{{ item.product.price | currency }}</td>
      <td>
        <div class="quantity-selector">
          <!-- SVG Trash Button -->
          @if (item.quantity>1) {
          <button class="minus-btn" (click)="decreaseQuantity(item)">-</button>
          } @else {
          <button class="trash" title="Delete" (click)="removeItem(item)">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="#dc3545"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="3 6 5 6 21 6"></polyline>
              <path
                d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
              ></path>
              <line x1="10" y1="11" x2="10" y2="17"></line>
              <line x1="14" y1="11" y2="17" x2="14"></line>
            </svg>
          </button>
          }

          <input
            type="number"
            [(ngModel)]="item.quantity"
            (change)="updateQuantity(item, item.quantity)"
            min="1"
            class="form-control"
          />
          <span class="label">und.</span>
          <button class="plus-btn" (click)="increaseQuantity(item)">+</button>
        </div>
      </td>
      <td>
        {{ item.product.price * item.quantity | currency }}
      </td>
    </tr>
  </tbody>
</table>
